<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Durabilidade</title>
    <link rel="shortcut icon" href="imgs/fav.png" type="image/x-icon">
    <link rel="stylesheet" href="styles/style.css">
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
</head>
<body>
    <header>
        <div>
            <img src="imgs/logo-dur-cla.png" alt="" style="margin-left: 30px;">
        </div>
        <div class="header__img">
            <img src="imgs/zeentech-logo.png" alt="logo-zeentech" style="height: 40px;">
            <img src="imgs/truckBus.png" alt="logo-vw" style="float: right; height: 90px; margin-right: 30px;">
        </div>
    </header>
    <main>
        <div class="botoes">
            <div class="rod botoes__animacao" onclick="openPopup(0)">
                <img src="imgs/rodagem.png" alt="rodagem">
            </div>
            <div class="scha botoes__animacao" onclick="openPopup(1)">
                <img src="imgs/schadenstisch.png" alt="schadenstisch">
            </div>
            <div class="cons botoes__animacao" onclick="openPopup(2)">
                <img src="imgs/consumo.png" alt="consumo">
            </div>
            <div class="oleo botoes__animacao" onclick="openPopup(3)">
                <img src="imgs/oleo.png" alt="oleo">
            </div>
        </div>
    </main>
    <img src="imgs/caminhao-2.png" alt="caminhao1" class="caminhao__1">
    <img src="imgs/caminhao.png" alt="caminhao2" class="caminhao__2">
    <div class="modal" id="myModal" style="display: none;">
        <button onclick="toggleAutoChange()" id="btnAutoChange" class="botao__loop botoes__iframe">
            <img src="https://icons.iconarchive.com/icons/iconoir-team/iconoir/24/refresh-double-icon.png" width="24" height="24">
        </button>
        <button onclick="changeIframe(-1)" class="botoes__iframe botao__esquerda">&lt;</button>
        <button onclick="changeIframe(1)" id="btnNext" class="botoes__iframe botao__direita">&gt;</button>
        <span onclick="closePopup()" class="botoes__iframe botao__fechar">&times;</span>
        <iframe id="popupIframe" src=""></iframe>
    </div>
    <script>
        tippy('.rod', {
            content: '<strong>Quadro de Rodagem</strong><br>Quadro de Rodagem mostra status todos veículos durabilidade como: Km de teste, Motorista atual,  turnos consecutivos parados,  localização, eng. responsável, ordem prioridade etc.',
            allowHTML: true,
            placement: 'left',
        });
        
        tippy('.scha', {
            content: '<strong>Schadenstisch</strong><br>Indicador Schadenstisch consiste em mostrar a evolução dos status dos KPM\'s, por diferentes FG\'s, total kpm fechados, e responsáveis semanalmente.',
            allowHTML: true,
            placement: 'right',
        });

        tippy('.cons', {
            content: '<strong>Consumo</strong><br>Controle de Consumo consiste em mostrar o comparativo dos veículos ativos, ônibus ou caminhão quanto ao consumo de Diesel e de Arla, e os custos de ambos.',
            allowHTML: true,
            placement: 'right',
        });

        tippy('.oleo', {
            content: '<strong>Vareta de Óleo</strong><br>Controle de Óleo na Vareta consiste em controlar e analisar o nível de óleo dos veículos e acompanhar o consumo atual com nº dos lacres dos mesmos.',
            allowHTML: true,
            placement: 'left',
        });

        let currentIframeIndex = 0;
        const iframeSources = [
            'https://app.powerbi.com/reportEmbed?reportId=0e667a6f-23c4-48ee-8a73-940ccb239b68&autoAuth=true&ctid=959ebf68-bcaf-4dec-b44a-6934403eb9f3',
            'https://app.powerbi.com/reportEmbed?reportId=ab18bd18-e88d-4326-bdcc-e1525de6034c&autoAuth=true&ctid=959ebf68-bcaf-4dec-b44a-6934403eb9f3',
            'https://app.powerbi.com/reportEmbed?reportId=b233dd20-7326-46b1-b018-d2b316dafb43&autoAuth=true&ctid=959ebf68-bcaf-4dec-b44a-6934403eb9f3',
            'https://app.powerbi.com/reportEmbed?reportId=13b403db-f2ef-49b0-ba12-71fc6273536f&autoAuth=true&ctid=959ebf68-bcaf-4dec-b44a-6934403eb9f3'
        ];

        function openPopup(index) {
            currentIframeIndex = index;
            var popupIframe = document.getElementById('popupIframe');
            popupIframe.src = iframeSources[index];
            document.getElementById('myModal').style.display = 'block';
        }

        function closePopup() {
            document.getElementById('myModal').style.display = 'none';
        }

        function changeIframe(delta) {
            currentIframeIndex = (currentIframeIndex + delta + iframeSources.length) % iframeSources.length;
            var popupIframe = document.getElementById('popupIframe');
            popupIframe.src = iframeSources[currentIframeIndex];
        }

        let isAutoChangeEnabled = false; // Definindo a variável

        function toggleAutoChange() {
            const button = document.getElementById('btnAutoChange');

            if (!isAutoChangeEnabled) {
                autoChangeInterval = setInterval(clickNextButton, 40000); // Clicar a cada 1 minuto (60000 milissegundos)
                button.style.backgroundColor = '#158544'; // Define a cor de fundo para indicar que está ativado
            } else {
                clearInterval(autoChangeInterval);
                button.style.backgroundColor = ''; // Remove a cor de fundo para indicar que está desativado
            }

            isAutoChangeEnabled = !isAutoChangeEnabled;
        }

        function clickNextButton() {
            document.getElementById('btnNext').click(); // Simula um clique no botão de próxima iframe
        }
    </script>
</body>
</html>
